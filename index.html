<html>


<body>

<div class="debug"></div>

<script>
function dbg(str){
   document.querySelector(".debug").innerHTML = str;
}

let axios = {
  'get': (url, token, noParse) => {
    return new Promise((resolve, reject) => {
      try {
        var xmlhttp = new XMLHttpRequest();
        
        xmlhttp.onreadystatechange = function () {
          if (this.readyState == 4 && String(this.status).startsWith('2')) {
            try {
              if (!noParse) {
                resolve(JSON.parse(this.responseText));
              } else {
                resolve(this.responseText);
              }
            } catch(e) {
              resolve();
            }
          } else if (this.responseText) {
            try {
              if (!noParse) {
                resolve(JSON.parse(this.responseText));
              } else {
                resolve(this.responseText);
              }
            } catch(e) {}
          }
        };
        xmlhttp.onerror = function () {
          if (this.responseText) {
            try {
              if (!noParse) {
                resolve(JSON.parse(this.responseText));
              } else {
                resolve(this.responseText);
              }
            } catch(e) {}
          }
        };

        xmlhttp.open('GET', url, true);
        xmlhttp.send();
      } catch(e) { reject(e) }
    });
  }
};


async function getNextTrain(){
  
  //const urlRakevet = 'https://www.rail.co.il/apiinfo/api/Plan';
  let proxy = 'https://scepter-cors2.herokuapp.com/';
    
    
  const urlRakevet = 'https://www.rail.co.il/apiinfo/api/Plan/Query:telaviv->beersheva"';

  dbg(urlRakevet)
  try{
  const resp = await axios.get(proxy+ urlRakevet);
  }catch(e){
    dbg(e)
  }
  dbg(resp)
  console.log(resp);
}

getNextTrain();

</script>


</body>


</html>